extends layout

block content
  // We only expect one message so this is okay to do without a for loop.
  if hasMessages
    - for (var i = 0; i < messages.length; i++) {
      div.alert(class='#{messages[i].type}')
        ul
            li #{messages[i].message}
    - }

  // Head
  .featurette
    .container
      .row
        .col-md-5
          video#localVideo(autoplay="")
          // replace onmousein/out
          img#card(src="/img/hearthstone-card.png", onClick="start()")
        .col-md-7
          form.form-inline.form-signup(role="form", action="https://madmimi.com/signups/subscribe/98558", method="post", target="_blank")
            h4.form-signup-heading Join us in our beta. Weâ€™re launching soon!
            input.form-control.pull-left(type="email", placeholder="Email address", name="signup[email]", required="", autofocus="")
            input.btn.btn-lg.btn-success.pull-left(type="submit", value="Sign Up" , name="commit") 

  // Features
  .features
    .featurette.feature0
      .container
        .row
          .col-md-4
            h1.featurette-heading ONE CLICK
            p.lead add your friends to your stream through the browser, no setup required.
          .col-md-4
            h1.featurette-heading STREAM FRIENDS
            p.lead add your friends to your stream through the browser, no setup required.
          .col-md-4
            h1.featurette-heading SWITCH GAMES
            p.lead add your friends to your stream through the browser, no setup required.
    .featurette.feature1
      .container
        .row
          .col-md-7
            h1.featurette-heading Instant setup with OBS
            p.lead or any other broadcast program with an embedded browser (chrome/chromium or firefox)
          .col-md-5
            img.featurette-image.img-responsive.featurette-img( alt="320x320", src="/img/obs-section-bg.png")
    .featurette.feature2
      .container
        .row
          .col-md-5
            img.featurette-image.img-responsive.featurette-img( alt="320x320", src="/img/stream-with-your-friends.jpg")
          .col-md-7
            h1.featurette-heading Stream your friends
            p.lead add your friends to your stream through the browser, no setup required.
    .featurette.feature3
      .container
        .row
          .col-md-7
            h1.featurette-heading Embedded Twitch chat
            p.lead and tweets from your Twitter fans.
          .col-md-5
            img.featurette-image.img-responsive.featurette-img( alt="320x320", src="http://placehold.it/320x320")
    .featurette.feature4
      .container
        .row
          .col-md-5
            img.featurette-image.img-responsive.featurette-img( alt="320x320", src="http://placehold.it/320x320")
          .col-md-7
            h1.featurette-heading Switch from between games seamlessly
            p.lead using the web interface.
    .featurette.feature5
      .container
        .row
          .col-md-7
            h1.featurette-heading Choose from community created skins
            p.lead
          .col-md-5
            img.featurette-image.img-responsive.featurette-img( alt="320x320", src="http://placehold.it/320x320")
    .featurette.feature6
      .container
        .row
          .col-md-5
            img.featurette-image.img-responsive.featurette-img( alt="320x320", src="http://placehold.it/320x320")
          .col-md-7
            h1.featurette-heading Choose from community created skins
            p.lead
    .featurette.feature7
      .container
        .row
          .col-md-7
            h1.featurette-heading Choose from community created skins
            p.lead
          .col-md-5
            img.featurette-image.img-responsive.featurette-img( alt="320x320", src="http://placehold.it/320x320")

  script.

    var localStream, localPeerConnection, remotePeerConnection;

    var localVideo = document.getElementById("localVideo");

    var start = function() {
      navigator.getUserMedia = navigator.getUserMedia ||
      navigator.webkitGetUserMedia || navigator.mozGetUserMedia;
      navigator.getUserMedia({video:true}, gotStream);
    }

    function gotStream(stream){
      localVideo.src = URL.createObjectURL(stream);
      localStream = stream;
    }
  // /form

//  
  .border
    .webcam
      | <iframe width="100%" height="100%" src="https://apprtc.appspot.com/?r=79067713"></iframe>

